(function(){"use strict";var t={4111:function(t,e,n){var o=n(9963),r=n(6252);const i={class:"panel"},s={class:"buttons"},a={class:"buttons"},l={key:0,class:"modal"},c={class:"modal-content"},d=(0,r._)("p",{class:"modal__title"},"Введите URL изображения",-1),h={class:"modal__label"},u={key:0,class:"error"},p=["disabled"];function b(t,e,n,b,m,f){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",i,[(0,r._)("div",s,[(0,r._)("button",{class:"btn btn_undo",onClick:e[0]||(e[0]=(...t)=>f.undo&&f.undo(...t))}),(0,r._)("button",{class:"btn btn_redo",onClick:e[1]||(e[1]=(...t)=>f.redo&&f.redo(...t))}),(0,r._)("button",{class:"btn btn_header",onClick:e[2]||(e[2]=(...t)=>f.makeHeader&&f.makeHeader(...t))}),(0,r._)("button",{class:"btn btn_paragraph",onClick:e[3]||(e[3]=(...t)=>f.makeParagraph&&f.makeParagraph(...t))}),(0,r._)("button",{class:"btn btn_modal",onClick:e[4]||(e[4]=(...t)=>f.openModal&&f.openModal(...t))}),(0,r._)("button",{class:"btn btn_text",onClick:e[5]||(e[5]=(...t)=>f.copyHtml&&f.copyHtml(...t))},"Скопировать HTML")]),(0,r._)("div",a,[(0,r._)("button",{class:"btn btn_text",onClick:e[6]||(e[6]=(...t)=>f.saveToCache&&f.saveToCache(...t))},"Сохранить"),(0,r._)("button",{class:"btn btn_text",onClick:e[7]||(e[7]=(...t)=>f.clearCache&&f.clearCache(...t))},"Очистить")])]),(0,r._)("div",{contenteditable:"true",ref:"editor",onInput:e[8]||(e[8]=(...t)=>f.updateHistory&&f.updateHistory(...t)),onKeydown:e[9]||(e[9]=(0,o.D2)((0,o.iM)(((...t)=>f.insertTab&&f.insertTab(...t)),["prevent"]),["tab"])),class:"editor"},null,544),m.showModal?((0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",c,[(0,r._)("span",{class:"close",onClick:e[10]||(e[10]=(...t)=>f.closeModal&&f.closeModal(...t))},"×"),d,(0,r._)("label",h,[(0,r.wy)((0,r._)("input",{class:"modal__input","onUpdate:modelValue":e[11]||(e[11]=t=>m.imageUrl=t),onKeyup:e[12]||(e[12]=(0,o.D2)(((...t)=>f.insertImage&&f.insertImage(...t)),["enter"]))},null,544),[[o.nr,m.imageUrl]]),m.imageUrl&&!f.isValidUrl?((0,r.wg)(),(0,r.iD)("span",u," URL изображения не валиден ")):(0,r.kq)("",!0)]),(0,r._)("button",{class:"submit",disabled:!f.isValidUrl,onClick:e[13]||(e[13]=(...t)=>f.insertImage&&f.insertImage(...t))}," Добавить ",8,p)])])):(0,r.kq)("",!0)],64)}n(560);var m=n(8496),f=n.n(m),g={data(){return{history:[],historyIndex:-1,showModal:!1,imageUrl:"",savedRange:null}},computed:{isValidUrl(){const t=/^(http|https):\/\/[^ "]+$/;return t.test(this.imageUrl)}},methods:{updateHistory(){this.$refs.editor.lastChild&&"DIV"!==this.$refs.editor.lastChild.nodeName&&(this.history.push(this.$refs.editor.innerHTML),this.historyIndex++)},undo(){this.historyIndex>0&&(this.historyIndex--,this.$refs.editor.innerHTML=this.history[this.historyIndex])},redo(){this.historyIndex<this.history.length-1&&(this.historyIndex++,this.$refs.editor.innerHTML=this.history[this.historyIndex])},makeHeader(){document.execCommand("formatBlock",!1,"h1")},makeParagraph(){document.execCommand("formatBlock",!1,"p")},openModal(){this.showModal=!0,this.savedRange=this.saveRange()},closeModal(){this.showModal=!1},insertImage(){this.isValidUrl&&(this.savedRange&&this.restoreRange(this.savedRange),document.execCommand("insertHTML",!1,'<img class="resizable" src="'+this.imageUrl+'">'),this.imageUrl="",this.closeModal(),this.initResizable())},initResizable(){this.$nextTick((()=>{f()(".resizable").resizable({edges:{left:!1,right:!0,bottom:!0,top:!1}}).on("resizemove",(function(t){var e=t.target;e.style.width=t.rect.width+"px",e.style.height=t.rect.height+"px",0!==t.deltaRect.left&&(e.style.left=t.rect.left+"px"),0!==t.deltaRect.top&&(e.style.top=t.rect.top+"px")}))}))},copyHtml(){try{navigator.clipboard.writeText(this.$refs.editor.innerHTML)}catch(t){console.error("Failed to copy HTML: ",t)}},saveRange(){const t=window.getSelection();return t.rangeCount>0?t.getRangeAt(0):null},restoreRange(t){const e=window.getSelection();e.removeAllRanges(),e.addRange(t)},insertTab(){document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;")},saveToCache(){localStorage.setItem("editorContent",this.$refs.editor.innerHTML)},clearCache(){localStorage.removeItem("editorContent"),this.$refs.editor.innerHTML=""}},mounted(){localStorage.getItem("editorContent")&&(this.$refs.editor.innerHTML=localStorage.getItem("editorContent"))}},v=n(3744);const y=(0,v.Z)(g,[["render",b]]);var _=y;(0,o.ri)(_).mount("#app")}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,o,r,i){if(!o){var s=1/0;for(d=0;d<t.length;d++){o=t[d][0],r=t[d][1],i=t[d][2];for(var a=!0,l=0;l<o.length;l++)(!1&i||s>=i)&&Object.keys(n.O).every((function(t){return n.O[t](o[l])}))?o.splice(l--,1):(a=!1,i<s&&(s=i));if(a){t.splice(d--,1);var c=r();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[o,r,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,i,s=o[0],a=o[1],l=o[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)var d=l(n)}for(e&&e(o);c<s.length;c++)i=s[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(d)},o=self["webpackChunkeditor"]=self["webpackChunkeditor"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(4111)}));o=n.O(o)})();
//# sourceMappingURL=app.2ac46fcf.js.map